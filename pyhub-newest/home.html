<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>pyHub Coding Platform - Home</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        :root {
            --bg: #18181a;
            --header: #232324;
            --card: #232324;
            --text: #e6e6e6;
            --accent: #fbc02d;
            --easy: #4caf50;
            --medium: #fbc02d;
            --hard: #e57373;
        }
        body {
            margin: 0;
            font-family: 'Segoe UI', Arial, sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
        }
        .header {
            background: var(--header);
            padding: 0 32px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid #222;
        }
        .header .logo a {
            font-size: 1.6em;
            font-weight: bold;
            color: var(--accent);
            letter-spacing: 1px;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .header .nav {
            display: flex;
            gap: 28px;
        }
        .header .nav a {
            color: var(--text);
            text-decoration: none;
            font-size: 1em;
            opacity: 0.85;
            transition: color 0.2s;
        }
        .header .nav a:hover {
            color: var(--accent);
        }
        .header .auth {
            display: flex;
            gap: 16px;
            align-items: center;
        }
        .header .auth button {
            background: var(--accent);
            color: #232324;
            border: none;
            border-radius: 6px;
            padding: 8px 22px;
            font-weight: bold;
            font-size: 1em;
            cursor: pointer;
            transition: background 0.2s;
        }
        .header .auth button:hover {
            background: #ffd54f;
        }
        #profileCircle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--accent);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            position: relative;
            margin-left: 10px;
        }
        #profileCircle i {
            color: #232324;
            font-size: 1.3em;
        }
        #profilePopup {
            display: none;
            position: absolute;
            top: 50px;
            right: 0;
            background: var(--card);
            color: var(--text);
            border-radius: 10px;
            box-shadow: 0 2px 12px #0005;
            padding: 18px 28px;
            z-index: 10;
            min-width: 180px;
        }
        #profilePopup div {
            margin-bottom: 8px;
        }
        .main-content {
            margin: 0 auto;
            max-width: 1600px;
            padding: 40px 16px;
            display: flex;
            gap: 40px;
            min-height: calc(100vh - 60px);
        }
        .accomplishments {
            width: 280px;
            background: var(--card);
            border-radius: 14px;
            box-shadow: 0 2px 12px #0002;
            padding: 32px 22px;
            height: fit-content;
            margin-right: 0;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .accomplishments h2 {
            color: var(--accent);
            font-size: 1.2em;
            margin-top: 0;
            margin-bottom: 18px;
        }
        .solved-list {
            list-style: none;
            padding: 0;
            margin: 0;
            width: 100%;
        }
        .solved-list li {
            margin-bottom: 10px;
            padding: 8px 12px;
            background: #232324;
            border-radius: 8px;
            color: var(--easy);
            font-weight: 500;
            font-size: 1em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .solved-list li:last-child {
            margin-bottom: 0;
        }
        .solved-list .fa-check-circle {
            color: var(--accent);
        }
        .main-area {
            flex: 1;
            min-width: 0;
            display: flex;
            flex-direction: column;
        }
        .welcome-card {
            background: var(--card);
            border-radius: 14px;
            box-shadow: 0 2px 12px #0002;
            padding: 32px 36px;
            margin-bottom: 32px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .welcome-card h1 {
            margin: 0 0 12px 0;
            font-size: 2em;
            color: var(--accent);
        }
        .welcome-card p {
            margin: 0 0 18px 0;
            font-size: 1.1em;
            color: #bbb;
        }
        .start-btn {
            background: var(--accent);
            color: #232324;
            font-weight: bold;
            font-size: 1.1em;
            border: none;
            border-radius: 6px;
            padding: 12px 32px;
            cursor: pointer;
            margin-top: 10px;
            transition: background 0.2s;
        }
        .start-btn:hover {
            background: #ffd54f;
        }
        .problems-list {
            background: var(--card);
            border-radius: 12px;
            padding: 24px 0;
            box-shadow: 0 2px 12px #0002;
        }
        .problems-list h2 {
            margin: 0 0 18px 32px;
            color: var(--accent);
            font-size: 1.3em;
        }
        .difficulty-bar {
            display: flex;
            gap: 12px;
            margin: 0 0 18px 32px;
        }
        .diff-btn {
            background: #353537;
            color: #e6e6e6;
            border: none;
            border-radius: 8px;
            padding: 8px 22px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
            outline: none;
        }
        .diff-btn.easy {
            border: 2px solid var(--easy);
            color: var(--easy);
        }
        .diff-btn.medium {
            border: 2px solid var(--medium);
            color: var(--medium);
        }
        .diff-btn.hard {
            border: 2px solid var(--hard);
            color: var(--hard);
        }
        .diff-btn.selected, .diff-btn:active {
            background: var(--accent);
            color: #232324;
        }
        .problem-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 32px;
            border-bottom: 1px solid #222;
            font-size: 1.08em;
            transition: background 0.2s;
            cursor: pointer;
        }
        .problem-row:last-child {
            border-bottom: none;
        }
        .problem-title {
            color: var(--text);
            text-decoration: none;
            font-weight: 500;
            flex: 1;
        }
        .problem-difficulty {
            font-weight: bold;
            border-radius: 12px;
            padding: 4px 16px;
            margin-left: 18px;
            font-size: 0.98em;
        }
        .easy { background: #263e2b; color: var(--easy);}
        .medium { background: #3a3622; color: var(--medium);}
        .hard { background: #3e2323; color: var(--hard);}
        .problem-row:hover, .problem-row.selected {
            background: #353537;
            border-left: 4px solid var(--accent);
        }
        @media (max-width: 1200px) {
            .main-content { max-width: 100vw; gap: 20px; }
            .accomplishments { width: 180px; padding: 18px 8px; }
        }
        @media (max-width: 900px) {
            .main-content { flex-direction: column; gap: 0; }
            .accomplishments { width: 100%; margin-bottom: 24px; }
        }
        @media (max-width: 600px) {
            .main-content { padding: 12px; }
            .accomplishments { padding: 12px 6px; }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo">
            <a href="Landing_page.html">
                <i class="fa-solid fa-code"></i> PyHub
            </a>
        </div>
        <div class="nav">
            <a href="Landing_page.html">Home</a>
            <a href="lessons/lessons-page.html">Courses</a>
            <a href="home.html">Problems</a>
            <a href="About_us/about_us.html">About Us</a>
        </div>
        <div class="auth" id="userProfileSection">
            <div id="profileCircle">
                <i class="fa-solid fa-user"></i>
            </div>
            <div id="profilePopup">
                <div style="font-weight:bold;font-size:1.1em;margin-bottom:8px;" id="profileUsername">Username</div>
                <div>Problems Solved: <span id="profileSolved">0</span></div>
            </div>
            <button onclick="window.location.href='signup_page.html'">Signup</button>
            <button onclick="window.location.href='login.html'">Login</button>
        </div>
    </div>
    <div class="main-content">
        <div class="accomplishments">
            <h2><i class="fa-solid fa-trophy"></i> Solved Problems</h2>
            <ul class="solved-list" id="solvedList"></ul>
        </div>
        <div class="main-area">
            <div class="welcome-card">
                <h1>Welcome to the pyHub Coding Platform</h1>
                <p>Select a problem by difficulty and start coding:</p>
            </div>
            <div class="problems-list">
                <h2>Problems</h2>
                <div class="difficulty-bar">
                    <button class="diff-btn selected" data-diff="all" onclick="setDifficulty('all')">All</button>
                    <button class="diff-btn easy" data-diff="easy" onclick="setDifficulty('easy')">Easy</button>
                    <button class="diff-btn medium" data-diff="medium" onclick="setDifficulty('medium')">Medium</button>
                    <button class="diff-btn hard" data-diff="hard" onclick="setDifficulty('hard')">Hard</button>
                </div>
                <div id="problemsContainer"></div>
            </div>
        </div>
    </div>
    <script>
        // Example user data, replace with real session data
        const user = {
            username: localStorage.getItem('username') || "Guest",
            solved: JSON.parse(localStorage.getItem('solvedProblems') || '[]').length
        };

        document.getElementById("profileUsername").innerText = user.username;
        document.getElementById("profileSolved").innerText = user.solved;

        // Profile popup logic
        const profileCircle = document.getElementById("profileCircle");
        const profilePopup = document.getElementById("profilePopup");
        profileCircle.onclick = function(e) {
            profilePopup.style.display = profilePopup.style.display === "none" ? "block" : "none";
            e.stopPropagation();
        };
        document.body.onclick = function() {
            profilePopup.style.display = "none";
        };
        profilePopup.onclick = function(e) {
            e.stopPropagation();
        };

        // Problems data
        const problems = [
            { id: 1, title: "Maximal Rectangle", difficulty: "hard" },
            { id: 2, title: "Sum of Digits", difficulty: "easy" },
            { id: 3, title: "Combination Sum", difficulty: "medium" },
            { id: 4, title: "N-Queens", difficulty: "hard" },
            { id: 5, title: "Remove Duplicates", difficulty: "easy" },
            { id: 6, title: "Group Anagrams", difficulty: "medium" },
            { id: 7, title: "Reverse String", difficulty: "easy" },
            { id: 8, title: "Longest Valid Parentheses", difficulty: "hard" },
            { id: 9, title: "Valid Parentheses", difficulty: "medium" },
            { id: 10, title: "Check Even or Odd", difficulty: "easy" },
            { id: 11, title: "Wildcard Matching", difficulty: "hard" },
            { id: 12, title: "Largest Rectangle in Histogram", difficulty: "hard" },
            { id: 13, title: "String to Integer (atoi)", difficulty: "medium" },
            { id: 14, title: "Add Two Numbers", difficulty: "medium" },
            { id: 15, title: "Fibonacci Number", difficulty: "easy" },
            { id: 16, title: "3Sum", difficulty: "medium" },
            { id: 17, title: "Integer to Roman", difficulty: "medium" },
            { id: 18, title: "Minimum Window Substring", difficulty: "hard" },
            { id: 19, title: "Two Sum", difficulty: "easy" },
            { id: 20, title: "Longest Palindromic Substring", difficulty: "medium" },
            { id: 21, title: "Scramble String", difficulty: "hard" },
            { id: 22, title: "Sudoku Solver", difficulty: "hard" },
            { id: 23, title: "Letter Combinations of a Phone Number", difficulty: "medium" },
            { id: 24, title: "Palindrome Number", difficulty: "easy" },
            { id: 25, title: "Count Vowels", difficulty: "easy" },
            { id: 26, title: "Trapping Rain Water", difficulty: "medium" },
            { id: 27, title: "First Missing Positive", difficulty: "medium" },
            { id: 28, title: "Merge k Sorted Lists", difficulty: "hard" },
            { id: 29, title: "Spiral Matrix", difficulty: "medium" },
            { id: 30, title: "Regular Expression Matching", difficulty: "hard" },
            { id: 31, title: "Pow(x, n)", difficulty: "medium" },
            { id: 32, title: "Zigzag Conversion", difficulty: "medium" },
            { id: 33, title: "Square Root", difficulty: "easy" },
            { id: 34, title: "Maximum in Array", difficulty: "easy" },
            { id: 35, title: "Reverse Nodes in k-Group", difficulty: "hard" },
            { id: 36, title: "Find Length", difficulty: "easy" },
            { id: 37, title: "Search in Rotated Sorted Array", difficulty: "medium" },
            { id: 38, title: "Find Minimum", difficulty: "easy" },
            { id: 39, title: "Median of Two Sorted Arrays", difficulty: "hard" },
            { id: 40, title: "Remove Nth Node From End of List", difficulty: "medium" },
            { id: 41, title: "Word Ladder II", difficulty: "hard" },
            { id: 42, title: "Multiply Strings", difficulty: "medium" },
            { id: 43, title: "Longest Substring Without Repeating Characters", difficulty: "medium" },
            { id: 44, title: "Merge Two Lists", difficulty: "easy" },
            { id: 45, title: "First Missing Positive (Hard)", difficulty: "hard" },
            { id: 46, title: "Container With Most Water", difficulty: "medium" },
            { id: 47, title: "Factorial", difficulty: "easy" },
            { id: 48, title: "Roman to Integer", difficulty: "medium" },
            { id: 49, title: "Sum of List", difficulty: "easy" },
            { id: 50, title: "Substring with Concatenation of All Words", difficulty: "hard" }
        ];

        let selectedProblemId = null;
        let currentDifficulty = 'all';

        function setDifficulty(diff) {
            currentDifficulty = diff;
            renderProblems();
            document.querySelectorAll('.diff-btn').forEach(btn => {
                btn.classList.toggle('selected', btn.dataset.diff === diff);
            });
        }
        function renderProblems() {
            let filtered = problems;
            if (currentDifficulty !== 'all') {
                filtered = problems.filter(p => p.difficulty === currentDifficulty);
            }
            const container = document.getElementById('problemsContainer');
            container.innerHTML = '';
            filtered.forEach(problem => {
                const row = document.createElement('div');
                row.className = 'problem-row' + (problem.id === selectedProblemId ? ' selected' : '');
                row.onclick = (e) => {
                    const now = Date.now();
                    if (selectedProblemId === problem.id && now - lastClickTime < 500) {
                        window.location.href = `question_page.html?problem=${problem.id}`;
                    }
                    lastClickTime = now;
                    selectedProblemId = problem.id;
                    renderProblems();
                };
                row.innerHTML = `
                    <span class="problem-title">${problem.id}. ${problem.title}</span>
                    <span class="problem-difficulty ${problem.difficulty}">
                        ${problem.difficulty.charAt(0).toUpperCase() + problem.difficulty.slice(1)}
                    </span>
                `;
                container.appendChild(row);
            });
        }

        function renderSolvedProblems() {
            const solved = JSON.parse(localStorage.getItem('solvedProblems') || '[]');
            const list = document.getElementById('solvedList');
            list.innerHTML = '';
            if (solved.length === 0) {
                list.innerHTML = '<li style="color:#bbb;">No problems solved yet.</li>';
                return;
            }
            solved.forEach(id => {
                const prob = problems.find(p => p.id === id);
                if (prob) {
                    const li = document.createElement('li');
                    li.innerHTML = `<i class="fa-solid fa-check-circle" style="color:var(--accent);"></i> ${prob.title}`;
                    list.appendChild(li);
                }
            });
        }

        function startCoding() {
            if (!selectedProblemId) {
                alert("Please select a problem from the list before starting.");
                return;
            }
            window.location.href = `question_page.html?problem=${selectedProblemId}`;
        }

        // Initial render
        setDifficulty('all');
        renderSolvedProblems();

        // Listen for changes from other tabs/windows
        window.addEventListener('storage', function(e) {
            if (e.key === 'solvedProblems') renderSolvedProblems();
        });
    </script>
</body>